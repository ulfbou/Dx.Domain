<!-- Dx.Domain.Analyzers Project file -->
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <!-- Template Symbols -->
    <ProjectName>Dx.Domain.Analyzers</ProjectName>
    <Authors>Ulf Bourelius;Dx.Domain Team</Authors>
    <Company>Dx.Domain Team</Company>
    <Description>
      The Dx.Domain.Analyzers package provides Roslyn analyzers and code fixes for the Dx.Domain kernel.
      It is referenced as an analyzer package by consuming projects and should not produce a standalone application.
    </Description>
    <Tags>
      dx;domain-driven-design;ddd;functional;analyzers;invariants;result-pattern
    </Tags>
    <Copyright>Copyright © 2025 Dx.Domain Team. All rights reserved.</Copyright>
    <RepositoryUrl>https://github.com/ulfbou/Dx.Domain.git</RepositoryUrl>

    <!-- Build Defaults -->
    <Configuration Condition="'$(Configuration)' == ''">Debug</Configuration>
    <Platform Condition="'$(Platform)' == ''">AnyCPU</Platform>
    <TargetFramework>netstandard2.0</TargetFramework>
    <LangVersion>latest</LangVersion>
    <Nullable>enable</Nullable>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <NoWarn>1591</NoWarn>

    <!-- Analyzer project configuration -->
    <OutputType>Library</OutputType>
    <IsPackable>true</IsPackable>
    <IncludeBuildOutput>true</IncludeBuildOutput>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <EnforceExtendedAnalyzerRules>true</EnforceExtendedAnalyzerRules>
  </PropertyGroup>

  <PropertyGroup>
    <AssemblyTitle>Dx.Domain.Analyzers</AssemblyTitle>
    <Description>Roslyn analyzers for Dx.Domain. See README.md and CHANGELOG.md for details.</Description>
    <Company>Dx.Domain Team</Company>
    <Authors>Dx.Domain Team</Authors>
    <Copyright>Copyright © 2025 Dx.Domain Team. All rights reserved.</Copyright>
    <PackageProjectUrl>https://github.com/ulfbou/Dx.Domain.git</PackageProjectUrl>
    <RepositoryUrl>https://github.com/ulfbou/Dx.Domain.git</RepositoryUrl>
    <VersionPrefix Condition="'$(VersionPrefix)' == ''">1.0.0</VersionPrefix>
    <VersionSuffix Condition="'$(VersionSuffix)' == '' AND '$(Configuration)' == 'Debug'">dev</VersionSuffix>
    <Version Condition="'$(VersionSuffix)' != ''">$(VersionPrefix)-$(VersionSuffix)</Version>
    <Version Condition="'$(Version)' == ''">$(VersionPrefix)</Version>
    <AssemblyVersion>$(VersionPrefix).0</AssemblyVersion>
    <FileVersion>$(VersionPrefix).0</FileVersion>
    <InformationalVersion>$(Version)</InformationalVersion>
  </PropertyGroup>

  <PropertyGroup>
    <!-- Suppress assembly unification warnings caused by mixing netstandard2.0 with Dx.Domain/net10.0 in this analyzer project -->
    <ResolveAssemblyReferenceIgnoreTargetFrameworkAttributeVersionMismatch>true</ResolveAssemblyReferenceIgnoreTargetFrameworkAttributeVersionMismatch>
    <ResolveAssemblyReferenceIgnoreTargetFrameworkAttributeVersionMismatchPaths>Dx.Domain</ResolveAssemblyReferenceIgnoreTargetFrameworkAttributeVersionMismatchPaths>
    <MSBuildWarningsNotAsErrors>MSB3277;$(MSBuildWarningsNotAsErrors)</MSBuildWarningsNotAsErrors>
    <NoWarn>MSB3277;$(NoWarn)</NoWarn>
  </PropertyGroup>

  <PropertyGroup>
    <EnableNETAnalyzers>false</EnableNETAnalyzers>
    <RunAnalyzersDuringBuild>false</RunAnalyzersDuringBuild>
    <RunCodeAnalysis>false</RunCodeAnalysis>
  </PropertyGroup>

  <ItemGroup>
    <None Remove="F:\repos\dx.domain\docs\internal\analyzer-acceptance-criteria.md~" />
  </ItemGroup>

  <ItemGroup>
    <!-- Roslyn analyzer dependencies (kept internal to the analyzer package) -->
    <PackageReference Include="Microsoft.CodeAnalysis.Analyzers" Version="3.11.0" PrivateAssets="all" />
    <PackageReference Include="Microsoft.CodeAnalysis.CSharp" Version="5.0.0" PrivateAssets="all" />
    <PackageReference Include="Microsoft.CodeAnalysis.CSharp.Workspaces" Version="5.0.0" PrivateAssets="all" />
    <PackageReference Include="Microsoft.CodeAnalysis.Common" Version="5.0.0" PrivateAssets="all" />
  </ItemGroup>

  <ItemGroup>
    <!-- Analyzer needs Dx.Domain symbols at compile time; use assembly reference to avoid TF incompatibility with netstandard2.0 -->
    <!--<ProjectReference Include="..\Dx.Domain\Dx.Domain.csproj" ReferenceOutputAssembly="false" PrivateAssets="all" />-->
    <Reference Include="Dx.Domain">
      <HintPath>..\Dx.Domain\bin\$(Configuration)\net10.0\Dx.Domain.dll</HintPath>
      <Private>false</Private>
    </Reference>
  </ItemGroup>

  <ItemGroup>
    <Folder Include="Sample\" />
  </ItemGroup>

  <!-- Imports -->
  <Import Project="Directory.Pack.props" Condition="Exists('Directory.Pack.props')" />
  <Import Project="Directory.Sign.props" Condition="Exists('Directory.Sign.props') AND '$(EnableSigning)' == 'true'" />
  <Import Project="Directory.Test.props" Condition="Exists('Directory.Test.props') AND '$(EnableTesting)' == 'true'" />
  <Import Project="Directory.Quality.props" Condition="Exists('Directory.Quality.props') AND '$(EnableQuality)' == 'true'" />
  <Import Project="Directory.Security.props" Condition="Exists('Directory.Security.props') AND '$(EnableSecurity)' == 'true'" />
  <Import Project="Directory.Documentation.props" Condition="Exists('Directory.Documentation.props') AND '$(EnableDocumentation)' == 'true'" />
  <Import Project="Directory.Performance.props" Condition="Exists('Directory.Performance.props') AND '$(EnablePerformance)' == 'true'" />

</Project>
